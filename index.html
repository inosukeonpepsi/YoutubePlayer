<!DOCTYPE html>
<html>
<head>
    <title>YouTube Player + Channel Browser</title>
    <style>
        body {
            margin: 0;
            background: #111;
            color: white;
            font-family: Arial;
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        #leftPanel {
            width: 70%;
            padding: 20px;
            box-sizing: border-box;
        }

        #rightPanel {
            width: 30%;
            border-left: 2px solid #333;
            padding: 20px;
            box-sizing: border-box;
            overflow-y: auto;
        }

        input, button {
            padding: 10px;
            margin-top: 10px;
            width: 80%;
            border-radius: 5px;
            border: none;
            font-size: 14px;
        }

        button {
            background: red;
            color: white;
            cursor: pointer;
            width: 40%;
            margin-left: 5px;
        }

        .videoItem {
            padding: 10px;
            border-bottom: 1px solid #333;
            cursor: pointer;
        }

        .videoItem:hover {
            background: #222;
        }

        iframe {
            border: none;
        }
    </style>
</head>

<body>

<div id="leftPanel">
    <h1>YouTube Video Player</h1>

    <input id="videoURL" placeholder="Paste a YouTube URL">
    <button onclick="loadVideo()">Load Video</button>

    <div style="margin-top:20px;">
        <iframe id="player" width="100%" height="500" allowfullscreen></iframe>
    </div>
</div>

<div id="rightPanel">
    <h2>Search Creator</h2>
    <input id="creatorName" placeholder="Enter creator/channel name">
    <button onclick="searchCreator()">Search</button>

    <div id="videoList" style="margin-top: 20px;"></div>
</div>

<script>
    const API_KEY = "YOUR_API_KEY_HERE"; // <-- PUT YOUR NEW KEY HERE

    // Extract video ID from YouTube URL
    function getVideoID(url) {
        try {
            let u = new URL(url);

            // Normal YouTube URL
            if (u.hostname.includes("youtube.com") && u.searchParams.get("v")) {
                return u.searchParams.get("v");
            }

            // Short youtu.be URL
            if (u.hostname === "youtu.be") {
                return u.pathname.replace("/", "");
            }
        } catch (e) {}

        return null;
    }

    function loadVideo() {
        let url = document.getElementById("videoURL").value;
        let id = getVideoID(url);

        if (!id) {
            alert("Invalid YouTube URL");
            return;
        }

        document.getElementById("player").src =
            `https://www.youtube.com/embed/${id}?autoplay=1`;
    }

    async function searchCreator() {
        let name = document.getElementById("creatorName").value;
        if (!name) return;

        // Search the channel
        let res = await fetch(
            `https://www.googleapis.com/youtube/v3/search?part=snippet&type=channel&q=${encodeURIComponent(name)}&key=${API_KEY}`
        );
        let data = await res.json();

        if (!data.items.length) {
            alert("No channel found");
            return;
        }

        let channelId = data.items[0].id.channelId;

        // Get uploads playlist
        let res2 = await fetch(
            `https://www.googleapis.com/youtube/v3/channels?part=contentDetails&id=${channelId}&key=${API_KEY}`
        );
        let data2 = await res2.json();

        let uploadsPlaylist = data2.items[0].contentDetails.relatedPlaylists.uploads;

        // Load the videos
        document.getElementById("videoList").innerHTML = "";
        loadChannelVideos(uploadsPlaylist);
    }

    async function loadChannelVideos(playlistId, pageToken = "") {
        let url =
            `https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&maxResults=50&playlistId=${playlistId}&key=${API_KEY}`
            + (pageToken ? `&pageToken=${pageToken}` : "");

        let res = await fetch(url);
        let data = await res.json();

        data.items.forEach(item => {
            let title = item.snippet.title;
            let videoId = item.snippet.resourceId.videoId;

            let div = document.createElement("div");
            div.className = "videoItem";
            div.innerText = title;
            div.onclick = () => {
                document.getElementById("player").src =
                    `https://www.youtube.com/embed/${videoId}?autoplay=1`;
            };

            document.getElementById("videoList").appendChild(div);
        });

        // If there are more videos, continue loading
        if (data.nextPageToken) {
            loadChannelVideos(playlistId, data.nextPageToken);
        }
    }
</script>

</body>
</html>
